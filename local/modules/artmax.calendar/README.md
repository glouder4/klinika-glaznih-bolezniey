# Artmax Calendar Module для Bitrix24

Модуль календаря для управления событиями и записями в Bitrix24.

## Описание

Модуль `artmax.calendar` предоставляет функциональность для создания, редактирования и управления событиями календаря. Модуль включает в себя:

- Административный интерфейс для управления событиями
- Компонент для отображения календаря на сайте
- API для работы с событиями
- Систему прав доступа
- Многоязычную поддержку

## Установка

1. Скопируйте папку модуля в `local/modules/artmax-calendar/`
2. Перейдите в административную панель Bitrix24
3. Откройте раздел "Настройки" → "Настройки продукта" → "Модули"
4. Найдите модуль "Artmax Calendar" и нажмите "Установить"

## Структура модуля

```
artmax-calendar/
├── install/                    # Файлы установки
│   ├── index.php              # Основной файл установки
│   ├── step.php               # Шаг установки
│   ├── unstep.php             # Шаг удаления
│   └── lang/                  # Языковые файлы
│       ├── ru/
│       └── en/
├── lib/                       # Библиотеки модуля
│   ├── EventHandlers.php      # Обработчики событий
│   └── Calendar.php           # Основной класс календаря
├── admin/                     # Административные страницы
│   ├── artmax_calendar_events.php
│   └── artmax_calendar_event_edit.php
├── components/                # Компоненты
│   └── artmax/
│       └── calendar/
│           ├── class.php
│           ├── .description.php
│           ├── .parameters.php
│           └── templates/
│               └── .default/
│                   └── template.php
├── css/                       # Стили
│   └── style.css
├── js/                        # JavaScript
│   └── script.js
└── README.md                  # Документация
```

## Использование

### Компонент календаря

Для отображения календаря на странице используйте компонент:

```php
<?$APPLICATION->IncludeComponent(
    "artmax:calendar",
    "",
    Array(
        "CACHE_TYPE" => "A",
        "CACHE_TIME" => "3600",
        "EVENTS_COUNT" => "10",
        "SHOW_FORM" => "Y"
    )
);?>
```

### API модуля

```php
// Подключение модуля
CModule::IncludeModule('artmax.calendar');

// Создание экземпляра календаря
$calendar = new Artmax\Calendar\Calendar();

// Добавление события
$eventId = $calendar->addEvent(
    'Название события',
    'Описание события',
    '2024-01-01 10:00:00',
    '2024-01-01 11:00:00',
    $userId
);

// Получение событий
$events = $calendar->getEvents(
    '2024-01-01 00:00:00',
    '2024-01-31 23:59:59',
    $userId
);

// Получение события по ID
$event = $calendar->getEvent($eventId);

// Обновление события
$calendar->updateEvent(
    $eventId,
    'Новое название',
    'Новое описание',
    '2024-01-01 12:00:00',
    '2024-01-01 13:00:00'
);

// Удаление события
$calendar->deleteEvent($eventId);

// Проверка доступности времени
$isAvailable = $calendar->isTimeAvailable(
    '2024-01-01 10:00:00',
    '2024-01-01 11:00:00',
    $userId
);
```

## Параметры компонента

| Параметр | Описание | По умолчанию |
|----------|----------|--------------|
| CACHE_TYPE | Тип кеширования | A |
| CACHE_TIME | Время кеширования (сек.) | 3600 |
| EVENTS_COUNT | Количество событий | 10 |
| SHOW_FORM | Показывать форму добавления | Y |

## Права доступа

Модуль поддерживает следующие права доступа:

- `W` - Полный доступ (чтение, запись, удаление)
- `R` - Только чтение
- `D` - Доступ запрещен

## События модуля

Модуль генерирует следующие события:

- `OnBeforeEventAdd` - Перед добавлением события
- `OnAfterEventAdd` - После добавления события
- `OnBeforeEventUpdate` - Перед обновлением события
- `OnAfterEventUpdate` - После обновления события
- `OnBeforeEventDelete` - Перед удалением события
- `OnAfterEventDelete` - После удаления события

## Кастомизация

### Изменение стилей

Для изменения стилей отредактируйте файл `css/style.css` или создайте собственный CSS файл.

### Изменение шаблона компонента

Скопируйте папку `templates/.default/` в `templates/custom/` и отредактируйте файл `template.php`.

### Добавление новых полей

Для добавления новых полей в события:

1. Измените структуру таблицы в `install/index.php`
2. Обновите класс `Calendar.php`
3. Измените административные страницы
4. Обновите компонент и шаблон

## Поддержка

При возникновении проблем:

1. Проверьте логи ошибок Bitrix24
2. Убедитесь, что модуль правильно установлен
3. Проверьте права доступа к файлам
4. Обратитесь к документации Bitrix24

## Лицензия

Модуль распространяется под лицензией MIT.

## Версии

- 1.0.0 - Первая версия модуля
  - Базовая функциональность календаря
  - Административный интерфейс
  - Компонент для сайта
  - Многоязычная поддержка 